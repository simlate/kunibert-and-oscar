import{f as u,h as c,M as m,b as j,N as U,O as I,P as Q,e as d,q as D,Q as A,p as O,a as q,R as X,S as w,T as R,U as M,V as Z,W as H,o as W,m as z,X as B,Y as G,Z as C,_ as J,$ as K,i as tt,d as k,a0 as S,a1 as et,a2 as st,a3 as P,a4 as it,E as rt,a5 as nt,a6 as at,a7 as ht,k as ot,a8 as ft,a9 as Y,aa as lt,ab as _t,ac as dt,ad as x,ae as E,af as ut,ag as ct,ah as pt,ai as gt,B as vt,aj as yt,ak as mt,D as bt}from"./D4Jo7ZfF.js";import{b as Et}from"./DEd8yWw-.js";import{c as Tt}from"./DTkoL9Yw.js";var wt=rt|nt|at;function Rt(s,t,i){new St(s,t,i)}class St{parent;is_pending=!1;#e;#y=c?u:null;#i;#l;#r;#s=null;#t=null;#n=null;#a=null;#f=null;#_=0;#h=0;#u=!1;#d=!1;#c=new Set;#p=new Set;#o=null;#E=Tt(()=>(this.#o=ot(this.#_),()=>{this.#o=null}));constructor(t,i,h){this.#e=t,this.#i=i,this.#l=h,this.parent=m.b,this.is_pending=!!this.#i.pending,this.#r=j(()=>{if(m.b=this,c){const e=this.#y;U(),e.nodeType===I&&e.data===Q?this.#w():(this.#T(),this.#h===0&&(this.is_pending=!1))}else{var n=this.#m();try{this.#s=d(()=>h(n))}catch(e){this.error(e)}this.#h>0?this.#v():this.is_pending=!1}return()=>{this.#f?.remove()}},wt),c&&(this.#e=u)}#T(){try{this.#s=d(()=>this.#l(this.#e))}catch(t){this.error(t)}}#w(){const t=this.#i.pending;t&&(this.#t=d(()=>t(this.#e)),D(()=>{var i=this.#m();this.#s=this.#g(()=>(A.ensure(),d(()=>this.#l(i)))),this.#h>0?this.#v():(O(this.#t,()=>{this.#t=null}),this.is_pending=!1)}))}#m(){var t=this.#e;return this.is_pending&&(this.#f=q(),this.#e.before(this.#f),t=this.#f),t}defer_effect(t){X(t,this.#c,this.#p)}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!this.#i.pending}#g(t){var i=m,h=H,n=W;w(this.#r),R(this.#r),M(this.#r.ctx);try{return t()}catch(e){return Z(e),null}finally{w(i),R(h),M(n)}}#v(){const t=this.#i.pending;this.#s!==null&&(this.#a=document.createDocumentFragment(),this.#a.append(this.#f),z(this.#s,this.#a)),this.#t===null&&(this.#t=d(()=>t(this.#e)))}#b(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#b(t);return}if(this.#h+=t,this.#h===0){this.is_pending=!1;for(const i of this.#c)B(i,G),C(i);for(const i of this.#p)B(i,J),C(i);this.#c.clear(),this.#p.clear(),this.#t&&O(this.#t,()=>{this.#t=null}),this.#a&&(this.#e.before(this.#a),this.#a=null)}}update_pending_count(t){this.#b(t),this.#_+=t,!(!this.#o||this.#u)&&(this.#u=!0,D(()=>{this.#u=!1,this.#o&&K(this.#o,this.#_)}))}get_effect_pending(){return this.#E(),tt(this.#o)}error(t){var i=this.#i.onerror;let h=this.#i.failed;if(this.#d||!i&&!h)throw t;this.#s&&(k(this.#s),this.#s=null),this.#t&&(k(this.#t),this.#t=null),this.#n&&(k(this.#n),this.#n=null),c&&(S(this.#y),et(),S(st()));var n=!1,e=!1;const o=()=>{if(n){ht();return}n=!0,e&&it(),A.ensure(),this.#_=0,this.#n!==null&&O(this.#n,()=>{this.#n=null}),this.is_pending=this.has_pending_snippet(),this.#s=this.#g(()=>(this.#d=!1,d(()=>this.#l(this.#e)))),this.#h>0?this.#v():this.is_pending=!1};D(()=>{try{e=!0,i?.(t,o),e=!1}catch(f){P(f,this.#r&&this.#r.parent)}h&&(this.#n=this.#g(()=>{A.ensure(),this.#d=!0;try{return d(()=>{h(this.#e,()=>t,()=>o)})}catch(f){return P(f,this.#r.parent),null}finally{this.#d=!1}}))})}}const Nt=["touchstart","touchmove"];function Dt(s){return Nt.includes(s)}const At=new Set,V=new Set;let L=null;function T(s){var t=this,i=t.ownerDocument,h=s.type,n=s.composedPath?.()||[],e=n[0]||s.target;L=s;var o=0,f=L===s&&s.__root;if(f){var _=n.indexOf(f);if(_!==-1&&(t===document||t===window)){s.__root=t;return}var p=n.indexOf(t);if(p===-1)return;_<=p&&(o=_)}if(e=n[o]||s.target,e!==t){ft(s,"currentTarget",{configurable:!0,get(){return e||i}});var N=H,l=m;R(null),w(null);try{for(var r,a=[];e!==null;){var g=e.assignedSlot||e.parentNode||e.host||null;try{var y=e["__"+h];y!=null&&(!e.disabled||s.target===e)&&y.call(e,s)}catch(b){r?a.push(b):r=b}if(s.cancelBubble||g===t||g===null)break;e=g}if(r){for(let b of a)queueMicrotask(()=>{throw b});throw r}}finally{s.__root=t,delete s.currentTarget,R(N),w(l)}}}function Ft(s,t){var i=t==null?"":typeof t=="object"?t+"":t;i!==(s.__t??=s.nodeValue)&&(s.__t=i,s.nodeValue=i+"")}function Ot(s,t){return $(s,t)}function It(s,t){Y(),t.intro=t.intro??!1;const i=t.target,h=c,n=u;try{for(var e=lt(i);e&&(e.nodeType!==I||e.data!==_t);)e=dt(e);if(!e)throw x;E(!0),S(e);const o=$(s,{...t,anchor:e});return E(!1),o}catch(o){if(o instanceof Error&&o.message.split(`
`).some(f=>f.startsWith("https://svelte.dev/e/")))throw o;return o!==x&&console.warn("Failed to hydrate: ",o),t.recover===!1&&ut(),Y(),ct(i),E(!1),Ot(s,t)}finally{E(h),S(n)}}const v=new Map;function $(s,{target:t,anchor:i,props:h={},events:n,context:e,intro:o=!0}){Y();var f=new Set,_=l=>{for(var r=0;r<l.length;r++){var a=l[r];if(!f.has(a)){f.add(a);var g=Dt(a);t.addEventListener(a,T,{passive:g});var y=v.get(a);y===void 0?(document.addEventListener(a,T,{passive:g}),v.set(a,1)):v.set(a,y+1)}}};_(pt(At)),V.add(_);var p=void 0,N=gt(()=>{var l=i??t.appendChild(q());return Rt(l,{pending:()=>{}},r=>{vt({});var a=W;if(e&&(a.c=e),n&&(h.$$events=n),c&&Et(r,null),p=s(r,h)||{},c&&(m.nodes.end=u,u===null||u.nodeType!==I||u.data!==yt))throw mt(),x;bt()}),()=>{for(var r of f){t.removeEventListener(r,T);var a=v.get(r);--a===0?(document.removeEventListener(r,T),v.delete(r)):v.set(r,a)}V.delete(_),l!==i&&l.parentNode?.removeChild(l)}});return F.set(p,N),p}let F=new WeakMap;function Mt(s,t){const i=F.get(s);return i?(F.delete(s),i(t)):Promise.resolve()}export{It as h,Ot as m,Ft as s,Mt as u};
